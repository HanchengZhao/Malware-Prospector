import csv
import numpy as np
import pickle
import json

# getting the trained model
lasso = pickle.load( open( "r_Lasso.pkl", "rb" ) )
importances = lasso.scores_
indices = np.argsort(importances)[::-1]

# print importances
# feature_names = open('../data/a_features.csv','rb').readline().split(",")[1:]
# print feature_names

with open('../data/data.csv') as datacsv:
	featureArray = []
	reader = csv.DictReader(datacsv)
	for row in reader:
		feature = {}
		feature[row['feature_name']] = {"min" : row['min'], "max" : row['max'], "step": row['step'] }
		featureArray.append(feature)
	# with open("featureDic.pkl", 'wb') as output:
	# 	pickle.dump(featureArray, output, pickle.HIGHEST_PROTOCOL)
	
ranking = []
for i in indices:
	ranking.append(featureArray[i])
# with open("lasso_ranking.pkl", 'wb') as output:
# 		pickle.dump(ranking, output, pickle.HIGHEST_PROTOCOL)
# print json.dumps(ranking)
# print max(indices)
# # Print the feature ranking
# print("Feature ranking:")
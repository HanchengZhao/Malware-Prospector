import pickle
import random

def get_rand_filename(label):
    with open('data/maps/l_filename_map.pkl', 'rb') as f:
        l_sample_map = pickle.load(f)
        name_pool = l_sample_map[label]
        random.seed()
        index = random.randint(0, len(name_pool))
        file_name = name_pool[index]
        return file_name
    
def get_random_sample(file_name):    
    with open('data/maps/f_filename_map.pkl', 'rb') as f:
        f_sample_map = pickle.load(f)
        sample = f_sample_map[file_name]
        return sample

def customize_result(sample):
    with open('data/maps/feature_indextoname_map.pkl', 'rb') as f:
        feature_indextoname_map = pickle.load(f)
        result = dict()
        for i in range(0, len(sample)):
            result[feature_indextoname_map[i]] = sample[i]
        return result


def get_sample(label):
    result_avg = dict()
    result_rand = dict()
    with open('data/maps/avg_map.pkl', 'rb') as f:
        avg_map = pickle.load(f)
        sample = avg_map[label]
        result_avg = customize_result(sample)
        file_name = get_rand_filename(label)
        sample = get_random_sample(file_name)
        result_rand = customize_result(sample)
        result = []
        result.append(result_rand)
        result.append(result_avg)
        return result
    # else:
    #     with open()

# get_sample()